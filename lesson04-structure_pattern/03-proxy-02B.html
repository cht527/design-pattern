<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>代理模板X域B页面——代理页面</title>
</head>
<body>
    <script type="text/JavaScript">
        window.onload = function () {
            // 如果不在A页面中返回，不执行
            if(top == self) return;
            // 获取并解析searcher 中数据
            var arr = location.search.substr(1).split('&');
            // 预定义函数名称以及参数集
            var fn,args;
            for(var i=0, len = arr.length, item; i<len; i++){
                // 解析 searcher 中的每组数据
                item = arr[i].split('=');
                // 判断是否为回调函数
                if(item[0]== 'callback'){
                    // 设置回调函数
                    fn = item[1];
                }else if(item[0] == "arg"){
                    args = item[1];
                }
            }
            try{
                // 执行A页面中预设的回调函数
                eval('top.' + fn + '("'+ args +'")');
            }
        }
    </script>
</body>
</html>